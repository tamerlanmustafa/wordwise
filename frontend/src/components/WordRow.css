/**
 * WordRow Styles
 *
 * Lightweight CSS optimized for virtualized rendering performance.
 * Click-to-expand design with on-demand translation loading.
 * Theme colors are passed via CSS custom properties from parent components.
 */

.word-row {
  position: relative;
  padding: 12px 24px;
  display: grid;
  grid-template-columns: 48px 1fr auto auto;
  gap: 0 12px;
  /* Align items to start so number stays aligned with word when expanded */
  align-items: start;
  min-height: 48px;
  /* Smooth transition for background and height changes */
  transition: background-color 0.2s ease;
  cursor: pointer;
  user-select: none;
}

.word-row:hover {
  background-color: var(--row-hover-bg, rgba(0, 0, 0, 0.04));
}

.word-row--expanded {
  background-color: var(--row-hover-bg, rgba(0, 0, 0, 0.02));
}

/* Row Number - aligned with word text */
.word-row__number {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-align: right;
  padding-right: 8px;
  /* Match the line height of the word for vertical alignment */
  line-height: 24px;
  padding-top: 1px;
}

/* Content */
.word-row__content {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  min-width: 0;
  flex-wrap: wrap;
}

.word-row__word {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  /* Match line-height with number for vertical alignment */
  line-height: 24px;
}

/* Expand hint (chevron) */
.word-row__expand-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-disabled);
  flex-shrink: 0;
  /* Match line-height for vertical alignment */
  height: 24px;
}

/* Translation container (animated expand/collapse) */
.word-row__translation-container {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-basis: 100%;
  padding-left: 0;
  /* Grid for smooth height animation */
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.2s ease-out, opacity 0.2s ease-out;
  opacity: 0;
}

.word-row__translation-container > .word-row__translation-inner {
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: 8px;
  padding-top: 8px;
}

/* Expanded/visible state */
.word-row__translation-container--visible {
  grid-template-rows: 1fr;
  opacity: 1;
}

.word-row__separator {
  color: var(--text-disabled);
  font-weight: 300;
  flex-shrink: 0;
}

.word-row__translation {
  font-size: 1rem;
  font-weight: 500;
  color: var(--group-color);
  opacity: 0.6;
}

.word-row__translation--loaded {
  opacity: 1;
}

/* Metadata - shown on hover */
.word-row__metadata {
  display: flex;
  gap: 6px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.word-row:hover .word-row__metadata {
  opacity: 1;
}

.word-row__badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  font-size: 0.6rem;
  border-radius: 4px;
  background-color: var(--badge-bg, rgba(0, 0, 0, 0.06));
  color: var(--text-secondary);
  white-space: nowrap;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.word-row__badge--cached {
  background-color: var(--badge-bg, rgba(0, 0, 0, 0.06));
  color: var(--text-secondary);
}

.word-row__badge--google {
  background-color: rgba(66, 133, 244, 0.12);
  color: #4285f4;
}

.word-row__badge--deepl {
  background-color: rgba(10, 132, 255, 0.12);
  color: #0A84FF;
}

.word-row__badge--warning {
  background-color: rgba(255, 152, 0, 0.12);
  color: #f57c00;
}

/* Idiom type badges */
.word-row__badge--idiom {
  background-color: rgba(156, 39, 176, 0.12);
  color: #9c27b0;
}

.word-row__badge--phrasal_verb {
  background-color: rgba(0, 150, 136, 0.12);
  color: #009688;
}

/* Actions */
.word-row__actions {
  display: flex;
  gap: 4px;
  align-items: center;
}

.word-row__action-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
  background-color: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease, transform 0.1s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.word-row__action-btn:hover {
  background-color: var(--action-hover-bg, rgba(0, 0, 0, 0.06));
  transform: scale(1.1);
}

.word-row__action-btn:active {
  transform: scale(0.95);
}

.word-row__action-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.word-row__action-btn:disabled:hover {
  background-color: transparent;
  transform: none;
}

.word-row__action-btn--saved {
  color: var(--primary-color, #b59fe1);
}

.word-row__action-btn--learned {
  color: var(--success-color, #4caf50);
}

/* Divider */
.word-row__divider {
  position: absolute;
  bottom: 0;
  left: 24px;
  right: 24px;
  height: 1px;
  background-color: var(--divider-color);
}

/* Idiom context section */
.word-row__idiom-context {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-top: 6px;
  padding-bottom: 4px;
  font-size: 0.875rem;
  flex-wrap: wrap;
}

.word-row__idiom-label {
  color: var(--text-secondary);
  font-weight: 500;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.word-row__idiom-phrase {
  font-weight: 600;
  color: var(--text-primary);
  font-style: italic;
}

.word-row__idiom-translation {
  color: var(--group-color);
  font-weight: 500;
}

.word-row__idiom-loading {
  color: var(--text-secondary);
  font-style: italic;
  font-size: 0.8rem;
}

/* Loading spinner animation */
.word-row__spinner {
  animation: spin 1s linear infinite;
  color: var(--group-color);
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
